{include file="layout/header"}
{include file="layout/navbar"} 
<link rel="stylesheet" href="/static/admin/plugins/select2/css/select2.min.css">
        <!--END NAVBAR-->
        <div class="boxed">
            <!--CONTENT CONTAINER-->
            <div id="content-container">
                <!--End breadcrumb-->
                <!--Page content-->
                <div id="page-content">
					<div class="row">
					    <div class="col-lg-12">
					        <div class="panel">
                            {include file="layout/bread"}
					            <!-- BASIC FORM ELEMENTS -->
					 <form method="post" action="editDo" id="edit_form" class="Validform">
                                                <input type="hidden" name="id" value="{$info.id}">
                                    <div class="panel-body form-horizontal form-padding">
                                        <!--text-->
                                        <div class="form-group">
                                            <label class="col-md-3 control-label">用户名</label>
                                            <div class="col-md-5">
                                                <input type="text" class="form-control" placeholder="请填写用户名" name="user_name" value="{$info.user_name}" datatype="*"  >
                                            </div>
                                        </div>

                                        
                                        <!--text-->
                                        <div class="form-group">
                                            <label class="col-md-3 control-label">真实姓名</label>
                                            <div class="col-md-5">
                                                <input type="text" class="form-control" placeholder="请填写真实姓名" name="real_name" value="{$info.real_name}"  >
                                            </div>
                                        </div>

                                        <!--text-->
                                        <div class="form-group">
                                            <label class="col-md-3 control-label">密码</label>
                                            <div class="col-md-5">
                                                <input type="password" class="form-control" name="password" value="" placeholder="用户密码"  >
                                            </div>
                                        </div>

                                       
                                        <!--<div class="form-group">-->
                                            <!--<label class="col-md-3 control-label">性别：</label>-->
                                            <!--<div class="col-md-5">-->
                                                <!--<div class="radio">-->
                                                    <!--<input id="radio-44" class="magic-radio" type="radio" name="sex" value="0" {if $info.sex==0}checked{/if}><label for="radio-44">男</label>-->
                                                    <!--<input id="radio-33" class="magic-radio" type="radio" name="sex" value="1" {if $info.sex==1}checked{/if}><label for="radio-33">女</label>-->
                                                <!--</div>-->
                                            <!--</div>-->
                                        <!--</div>-->
                                        <!---->
                                         <!--&lt;!&ndash;text&ndash;&gt;-->
                                        <!--<div class="form-group">-->
                                            <!--<label class="col-md-3 control-label">手机号：</label>-->
                                            <!--<div class="col-md-5">-->
                                                <!--<input type="text" class="form-control" placeholder="请填写手机号" name="phone" value="{$info.phone}"  >-->
                                            <!--</div>-->
                                        <!--</div>-->
                                         <!---->
                                         <!--&lt;!&ndash;text&ndash;&gt;-->
                                        <!--<div class="form-group">-->
                                            <!--<label class="col-md-3 control-label">邮箱：</label>-->
                                            <!--<div class="col-md-5">-->
                                                <!--<input type="text" class="form-control" placeholder="请填写邮箱" name="email" value="{$info.email}"  >-->
                                            <!--</div>-->
                                        <!--</div>-->
                                          <!--&lt;!&ndash;text&ndash;&gt;-->
                                        <!--<div class="form-group">-->
                                            <!--<label class="col-md-3 control-label">QQ：</label>-->
                                            <!--<div class="col-md-5">-->
                                                <!--<input type="text" class="form-control" placeholder="请填写qq" name="qq" value="{$info.qq}"  >-->
                                            <!--</div>-->
                                        <!--</div>-->
                                          <!---->
                                           <!--&lt;!&ndash;text&ndash;&gt;-->
                                        <!--<div class="form-group">-->
                                            <!--<label class="col-md-3 control-label">微信：</label>-->
                                            <!--<div class="col-md-5">-->
                                                <!--<input type="text" class="form-control" placeholder="请填写微信" name="wx" value="{$info.wx}"  >-->
                                            <!--</div>-->
                                        <!--</div>-->

                                        
                                       
                                        <!--select-->
                                        <div class="form-group">
                                            <label class="col-md-3 control-label">角色</label>
                                            <div class="col-md-5">
                                                <select class="selectpicker" name="role_id" id="hideselect">
                                                    <option value="0" selected>请选择角色</option>
                                                    {volist name="roleList" id="role"}
                                                    <option value="{$role.id}" {if condition="$info['role_id'] eq $role['id']"}selected {/if}>{$role.role_name}</option>
                                                    {/volist}
                                                </select>
                                            </div>
                                        </div>
                                       
                                   <div id='hide'>  
                                        <div class="form-group" id="test1"> 
                                            <label class="col-md-3 control-label">关联客服</label>
                                            <div class="col-md-5">
                                                <select class="selectpicker" name="customer_service_id">
                                                    <option value="0" selected>请选择客服</option>
                                                    {volist name="customer_service_list" id="service"}
                                                    <option value="{$service.customer_service_id}" {if condition="$info['customer_service_id'] eq $service['customer_service_id']"}selected {/if}>{$service.service_name}</option>
                                                    {/volist}
                                                </select>
                                            </div>  
                                        </div>  
                                      </div> 
                                      
                                 
                                         <div id='hide1'>       
                                        <div class="form-group" >
                                            <label class="col-md-3 control-label">关联园长</label>
                                            <div class="col-md-5">
                                                 <input type="hidden" name="city_parter" value="">
                                                <select class="selectpicker" name="customer_service_id" lay-ignore id="city_parter"  lay-verify="">
                                                    <option value="0" selected>请选择园长</option>
                                                    {volist name="customer_service_list" id="service"}
                                                    <option value="{$service.customer_service_id}">{$service.service_name}</option>
                                                    {/volist}
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                  
                                    </div>

                                    </div>
					            <!-- END BASIC FORM ELEMENTS -->
                                <div class="panel-footer text-right">
                                    <button class="btn btn-success" id="btnSubmit" type="button"">提交</button>
                                    
                                </div>
                                </form>
					        </div>
					    </div>
					</div>

                </div>
                <!--End page content-->
            </div>
            <!--END CONTENT CONTAINER-->
            <!--ASIDE-->
            <!--END ASIDE-->
            <!--MAIN NAVIGATION-->
            {include file="layout/menu"}
            <!--END MAIN NAVIGATION-->
        </div>
        <!-- FOOTER -->
        {include file="layout/footer"}
        <!-- END FOOTER -->
        <!-- SCROLL PAGE BUTTON -->
        <button class="scroll-top btn">
            <i class="pci-chevron chevron-up"></i>
        </button>
    </div>
    <!-- END OF CONTAINER -->
</body>
<body onload=hidediv()>
<script type="text/javascript" src="/static/admin/plugins/select2/js/select2.min.js?v=13"></script>
<script type="text/javascript" src="/static/admin/plugins/select2/js/zh-CN.js?v=10"></script>
<script>
    $('#city_parter').select2({
            placeholder:'请选择',//默认文字提示
            language: "zh-CN",
            tags: true,//允许手动添加
            allowClear: false,//允许清空
            allowAppendSearch: false,//不允许将搜索文字放进下拉列表中
            allowClearSearchOnClose: false,//不允许关闭时候将搜索内容清除
            ajax: {
                type:'POST',
                url: "/Admin/Getdirector",
                dataType: 'json',
                delay: 250,
                data: function (params) {
                    var data = {
                        name: params.term, // search term 请求参数
                        page: params.page ? params.page : 1,
                        page_size:10,
                    };
                    return data;
                },
                processResults: function (data, params) {
                    if(data.code == 0){
                        params.page = params.page || 1;
                        var itemList = [];//当数据对象不是{id:0,text:'ANTS'}这种形式的时候，可以使用类似此方法创建新的数组对象
                        for(var i=0;i<data.data.list.length;++i){
                            itemList.push({id: data.data.list[i], text: data.data.list[i]})
                        }
                        return {
                            results: itemList,//itemList
                            pagination: {
                                more: (params.page * 5) < data.data.total_count
                            }
                        };
                    }else{
                        return {
                            results: [],//itemList
                            pagination: {
                                more: false
                            }
                        };
                    }

                },
                cache: true
            },
            escapeMarkup: function (markup) { return markup; }, // 自定义格式化防止xss注入
            minimumInputLength: 1,//最少输入多少个字符后开始查询
            formatResult: function formatRepo(repo){return repo.text;}, // 函数用来渲染结果
            formatSelection: function formatRepoSelection(repo){return repo.text;}, // 函数用于呈现当前的选择
        });

    $("#city_parter").on("select2:select",function(e){
        $("input[name=city_parter]").val(e.params.data.text);
//        console.log($("#select2-area-container").attr('title'));
    });



    $(function(){
    //给btnsubmit绑定点击事件
    $('#btnSubmit').on('click',function(){
        //表单提交
        $('form').submit();
    })
});
function hidediv(){
document.getElementById('hide').style.display='none';
document.getElementById('hide1').style.display='none';
}

 $(function(){
        $(document).ready(function(){
            $("#hideselect").change(function(){
                var hideselect = $(this).val();
                if(hideselect == 5){
                    $("#hide").hide().removeClass("show");
                    
                }else{
                    $("#hide").show().addClass("show");
                }
            })
        })
    });
    $(function(){
        $(document).ready(function(){
            $("#hideselect").change(function(){
                var hideselect = $(this).val();
                if(hideselect == 2||hideselect == 1||hideselect == 3||hideselect == 4||hideselect == 6||hideselect == 7){
                    $("#hide1").hide().removeClass("show");
                    
                }else{
                    $("#hide1").show().addClass("show");
                }
            })
        })
    });




function check(){
//    var ph = $('input[name=phone]').val();
//    if(ph!=''&&ph.match("^1[34578][0-9]{9}$") == null){
//        layer.msg('手机号格式不正确');
//        return false;
//    }
//    var reg = /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;
//    var em = $('input[name=email]').val();
//    if(em!=''&&!reg.test(em)){
//        layer.msg('邮箱格式不正确');
//        return false;
//    }
    submit_prev('edit_form');
} 
</script>
</html>
